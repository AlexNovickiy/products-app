import{a as p,i}from"./vendor-Cbhu4xvy.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function s(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerPolicy&&(c.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?c.credentials="include":r.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(r){if(r.ep)return;r.ep=!0;const c=s(r);fetch(r.href,c)}})();const o={categoriesList:document.querySelector(".categories"),productsList:document.querySelector(".products"),notFound:document.querySelector(".not-found"),modalProduct:document.querySelector(".modal"),modalCloseBtn:document.querySelector(".modal__close-btn"),searchForm:document.querySelector(".search-form"),modalProductBtnCart:document.querySelector(".modal-product__btn--cart"),dataCartCount:document.querySelector(".nav__count[data-cart-count]"),modalProductBtnWishlist:document.querySelector(".modal-product__btn--wishlist"),dataWishlistCount:document.querySelector(".nav__count[data-wishlist-count]"),cartSummaryPrice:document.querySelector(".cart-summary__value[data-price]"),cartSummaryCount:document.querySelector(".cart-summary__value[data-count]"),cartSummaryBtn:document.querySelector(".cart-summary__btn"),loader:document.querySelector(".loader-wrapper")},l="cart",u="wishlist";function _(){o.loader.classList.add("loader")}function h(){o.loader.classList.remove("loader")}function j(e){o.categoriesList.innerHTML=e.map(t=>`<li class="categories__item">
   <button class="categories__btn" type="button">${t}</button>
 </li>`).join("")}function m(e){_(),o.productsList.innerHTML=e.map(t=>`<li class="products__item" data-id="${t.id}">
    <img class="products__image" src="${t.images[0]}" alt="${t.title}"/>
    <p class="products__title">${t.title}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:</span> ${t.brand}</p>
    <p class="products__category">Category: ${t.category}</p>
    <p class="products__price">Price: $${t.price}</p>
 </li>
`).join(""),setTimeout(()=>{h()},200)}function v(e){_(),o.productsList.insertAdjacentHTML("beforeend",e.map(t=>`<li class="products__item" data-id="${t.id}" data-category="${t.category}">
    <img class="products__image" src="${t.images[0]}" alt="${t.title}"/>
    <p class="products__title">${t.title}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:</span> ${t.brand}</p>
    <p class="products__category">Category: ${t.category}</p>
    <p class="products__price">Price: $${t.price}</p>
 </li>
`).join("")),setTimeout(()=>{h()},200)}function $(e){Array.from(o.productsList.children).forEach(s=>{s.dataset.category.trim().toLowerCase()===e&&s.remove()})}function I(e){o.modalProduct.classList.add("modal--is-open");const t=o.modalProduct.querySelector(".modal-product");t.innerHTML=`
    <img class="modal-product__img" src="${e.images[0]}" alt="${e.title}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${e.title}</p>
        <ul class="modal-product__tags">
          ${e.tags.map(s=>`<li class="modal-product__tag">${s}</li>`).join("")}
        </ul>
        <p class="modal-product__description">${e.description}</p>
        <p class="modal-product__shipping-information">Shipping: ${e.shipping}</p>
        <p class="modal-product__return-policy">Return Policy: ${e.returnPolicy}</p>
        <p class="modal-product__price">Price: $${e.price}</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>
  `}const f="https://dummyjson.com/products",B="category-list",C=1,w=`https://dummyjson.com/products?limit=12&skip=${(C-1)*12}`,g=12;async function D(){try{return["All",...(await p.get(`${f}/${B}`)).data]}catch{i.error({title:"Error",message:"Failed to fetch categories. Please try again later.",position:"topRight"})}}async function y(){try{return(await p.get(`${w}`)).data.products}catch{i.error({title:"Error",message:"Failed to fetch categories. Please try again later.",position:"topRight"})}}async function O(e){try{const t=await p.get(`${f}/category/${e}?limit=${g}&skip=${(C-1)*g}`);return t.data.products.length===0?o.notFound.classList.add("not-found--visible"):o.notFound.classList.remove("not-found--visible"),t.data.products}catch{i.error({title:"Error",message:"Failed to fetch products by category. Please try again later.",position:"topRight"})}}async function L(e){try{return(await p.get(`${f}/${e}`)).data}catch{i.error({title:"Error",message:"Failed to fetch product by ID. Please try again later.",position:"topRight"})}}async function E(e){try{return(await p.get(`${f}/search`,{params:{q:e,limit:g,skip:(C-1)*g}})).data.products}catch{i.error({title:"Error",message:"Failed to fetch products by query. Please try again later.",position:"topRight"})}}function F(e){const t=JSON.parse(localStorage.getItem(l))||[];t.push(e),localStorage.setItem(l,JSON.stringify(t))}function q(e){const s=(JSON.parse(localStorage.getItem(l))||[]).filter(a=>a!==e);localStorage.setItem(l,JSON.stringify(s))}function x(e){const t=JSON.parse(localStorage.getItem(u))||[];t.push(e),localStorage.setItem(u,JSON.stringify(t))}function R(e){const s=(JSON.parse(localStorage.getItem(u))||[]).filter(a=>a!==e);localStorage.setItem(u,JSON.stringify(s))}var S;o.dataCartCount.textContent=((S=JSON.parse(localStorage.getItem(l)))==null?void 0:S.length)||0;var P;o.dataWishlistCount.textContent=((P=JSON.parse(localStorage.getItem(u)))==null?void 0:P.length)||0;o.productsList.addEventListener("click",N);o.modalCloseBtn.addEventListener("click",T);o.modalProduct.addEventListener("click",W);o.modalProductBtnCart.addEventListener("click",A);o.modalProductBtnWishlist.addEventListener("click",J);o.cartSummaryBtn&&o.cartSummaryBtn.addEventListener("click",k);b();function b(){const e=JSON.parse(localStorage.getItem(l))||[];if(o.cartSummaryCount&&o.cartSummaryPrice){o.cartSummaryCount.textContent=e.length;const t=e.map(s=>L(s));Promise.all(t).then(s=>{const a=s.reduce((r,c)=>{const d=parseFloat(c.price);return r+=d,r},0);o.cartSummaryPrice.textContent=`$${a.toFixed(2)}`,m(s)})}}let n;async function H(e){if(e.target.tagName!=="BUTTON")return;const t=e.target,s=t.textContent.trim().toLowerCase();if(o.notFound.classList.remove("not-found--visible"),s==="all"){o.categoriesList.querySelectorAll(".categories__btn").forEach(r=>{r!==t&&r.classList.remove("categories__btn--active")}),t.classList.add("categories__btn--active"),m(await y());return}if(o.categoriesList.querySelectorAll(".categories__btn").forEach(r=>{r.textContent.trim().toLowerCase()==="all"&&r.classList.remove("categories__btn--active")}),t.classList.toggle("categories__btn--active"),!t.classList.contains("categories__btn--active")){$(s),o.productsList.querySelectorAll(".products__item").length===0&&m(await y());return}o.productsList.querySelectorAll(".products__item").forEach(r=>{r.dataset.category||r.remove()});const a=await O(s);v(a)}async function N(e){var a,r;const t=e.target.closest(".products__item");if(!t)return;n=t.dataset.id;const s=await L(n);I(s),(a=JSON.parse(localStorage.getItem("cart")))!=null&&a.includes(n)?(o.modalProductBtnCart.textContent="Remove from cart",o.modalProductBtnCart.dataset.inCart="true"):(o.modalProductBtnCart.textContent="Add to cart",o.modalProductBtnCart.dataset.inCart="false"),(r=JSON.parse(localStorage.getItem("wishlist")))!=null&&r.includes(n)?(o.modalProductBtnWishlist.textContent="Remove from wishlist",o.modalProductBtnWishlist.dataset.inWishlist="true"):(o.modalProductBtnWishlist.textContent="Add to wishlist",o.modalProductBtnWishlist.dataset.inWishlist="false")}function T(){o.modalProduct.classList.remove("modal--is-open")}function W(e){e.target===e.currentTarget&&e.currentTarget.classList.remove("modal--is-open")}async function G(e){e.preventDefault(),_();const t=e.target.elements.searchValue.value.trim().toLowerCase();if(!t)return;const s=await E(t);if(o.productsList.innerHTML="",s.length===0){setTimeout(()=>{h()},200),o.notFound.classList.add("not-found--visible");return}else o.notFound.classList.remove("not-found--visible"),m(s)}async function K(e){e.preventDefault(),o.searchForm.elements.searchValue.value="",o.notFound.classList.remove("not-found--visible"),m(await y())}function A(e){e.preventDefault();const t=e.target;t.dataset.inCart==="true"?(q(n),i.success({title:"Success",message:"Product removed from cart",position:"bottomRight"}),t.textContent="Add to cart",t.dataset.inCart="false"):(F(n),i.success({title:"Success",message:"Product added to cart",position:"bottomRight"}),t.textContent="Remove from cart",t.dataset.inCart="true"),o.dataCartCount.textContent=JSON.parse(localStorage.getItem("cart")).length,b()}function J(e){e.preventDefault();const t=e.target;t.dataset.inWishlist==="true"?(R(n),i.success({title:"Success",message:"Product removed from wishlist",position:"bottomRight"}),t.textContent="Add to wishlist",t.dataset.inWishlist="false"):(x(n),i.success({title:"Success",message:"Product added to wishlist",position:"bottomRight"}),t.textContent="Remove from wishlist",t.dataset.inWishlist="true"),o.dataWishlistCount.textContent=JSON.parse(localStorage.getItem("wishlist")).length}function k(){i.info({title:"Cart Summary",message:`You bought ${o.cartSummaryCount.textContent} items for a total of ${o.cartSummaryPrice.textContent}.`,timeout:5e3,position:"bottomRight"})}export{l as S,u as a,T as b,W as c,A as d,J as e,m as f,L as g,D as h,j as i,y as j,H as k,G as l,K as m,N as o,o as r};
//# sourceMappingURL=handlers-DWTb8jRE.js.map
