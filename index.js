import"./assets/styles-BWaLkMzH.js";import{a as l,i as c}from"./assets/vendor-Cbhu4xvy.js";const o={categoriesList:document.querySelector(".categories"),productsList:document.querySelector(".products"),notFound:document.querySelector(".not-found"),modalProduct:document.querySelector(".modal"),modalCloseBtn:document.querySelector(".modal__close-btn"),searchForm:document.querySelector(".search-form"),modalProductBtnCart:document.querySelector(".modal-product__btn--cart"),dataCartCount:document.querySelector(".nav__count[data-cart-count]")};function y(e){o.categoriesList.innerHTML=e.map(t=>`<li class="categories__item">
   <button class="categories__btn" type="button">${t}</button>
 </li>`).join("")}function i(e){o.productsList.innerHTML=e.map(t=>`<li class="products__item" data-id="${t.id}">
    <img class="products__image" src="${t.images[0]}" alt="${t.title}"/>
    <p class="products__title">${t.title}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:</span> ${t.brand}</p>
    <p class="products__category">Category: ${t.category}</p>
    <p class="products__price">Price: $${t.price}</p>
 </li>
`).join("")}function f(e){o.productsList.insertAdjacentHTML("beforeend",e.map(t=>`<li class="products__item" data-id="${t.id}" data-category="${t.category}">
    <img class="products__image" src="${t.images[0]}" alt="${t.title}"/>
    <p class="products__title">${t.title}</p>
    <p class="products__brand"><span class="products__brand--bold">Brand:</span> ${t.brand}</p>
    <p class="products__category">Category: ${t.category}</p>
    <p class="products__price">Price: $${t.price}</p>
 </li>
`).join(""))}function C(e){Array.from(o.productsList.children).forEach(r=>{r.dataset.category.trim().toLowerCase()===e&&r.remove()})}function L(e){o.modalProduct.classList.add("modal--is-open");const t=o.modalProduct.querySelector(".modal-product");t.innerHTML=`
    <img class="modal-product__img" src="${e.images[0]}" alt="${e.title}" />
      <div class="modal-product__content">
        <p class="modal-product__title">${e.title}</p>
        <ul class="modal-product__tags">
          ${e.tags.map(r=>`<li class="modal-product__tag">${r}</li>`).join("")}
        </ul>
        <p class="modal-product__description">${e.description}</p>
        <p class="modal-product__shipping-information">Shipping: ${e.shipping}</p>
        <p class="modal-product__return-policy">Return Policy: ${e.returnPolicy}</p>
        <p class="modal-product__price">Price: $${e.price}</p>
        <button class="modal-product__buy-btn" type="button">Buy</button>
      </div>
  `}const g="https://dummyjson.com/products",h="category-list",m=1,P=`https://dummyjson.com/products?limit=12&skip=${(m-1)*12}`,u=12;async function b(){try{return["All",...(await l.get(`${g}/${h}`)).data]}catch{c.error({title:"Error",message:"Failed to fetch categories. Please try again later.",position:"topRight"})}}async function p(){try{return(await l.get(`${P}`)).data.products}catch{c.error({title:"Error",message:"Failed to fetch categories. Please try again later.",position:"topRight"})}}async function $(e){try{const t=await l.get(`${g}/category/${e}?limit=${u}&skip=${(m-1)*u}`);return t.data.products.length===0?o.notFound.classList.add("not-found--visible"):o.notFound.classList.remove("not-found--visible"),t.data.products}catch{c.error({title:"Error",message:"Failed to fetch products by category. Please try again later.",position:"topRight"})}}async function S(e){try{return(await l.get(`${g}/${e}`)).data}catch{c.error({title:"Error",message:"Failed to fetch product by ID. Please try again later.",position:"topRight"})}}async function v(e){try{return(await l.get(`${g}/search`,{params:{q:e,limit:u,skip:(m-1)*u}})).data.products}catch{c.error({title:"Error",message:"Failed to fetch products by query. Please try again later.",position:"topRight"})}}const d="cart";function B(e){const t=JSON.parse(localStorage.getItem(d))||[];t.push(e),localStorage.setItem(d,JSON.stringify(t))}function E(e){const r=(JSON.parse(localStorage.getItem(d))||[]).filter(s=>s!==e);localStorage.setItem(d,JSON.stringify(r))}let n;async function F(e){if(e.target.tagName!=="BUTTON")return;const t=e.target,r=t.textContent.trim().toLowerCase();if(r==="all"){o.categoriesList.querySelectorAll(".categories__btn").forEach(a=>{a!==t&&a.classList.remove("categories__btn--active")}),t.classList.add("categories__btn--active"),i(await p());return}if(o.categoriesList.querySelectorAll(".categories__btn").forEach(a=>{a.textContent.trim().toLowerCase()==="all"&&a.classList.remove("categories__btn--active")}),t.classList.toggle("categories__btn--active"),!t.classList.contains("categories__btn--active")){C(r),o.productsList.querySelectorAll(".products__item").length===0&&i(await p());return}o.productsList.querySelectorAll(".products__item").forEach(a=>{a.dataset.category||a.remove()});const s=await $(r);f(s)}async function I(e){var s;const t=e.target.closest(".products__item");if(!t)return;n=t.dataset.id;const r=await S(n);L(r),(s=JSON.parse(localStorage.getItem("cart")))!=null&&s.includes(n)?(o.modalProductBtnCart.textContent="Remove from cart",o.modalProductBtnCart.dataset.inCart="true"):(o.modalProductBtnCart.textContent="Add to cart",o.modalProductBtnCart.dataset.inCart="false")}function w(){o.modalProduct.classList.remove("modal--is-open")}function k(e){e.target===e.currentTarget&&e.currentTarget.classList.remove("modal--is-open")}async function q(e){e.preventDefault();const t=e.target.elements.searchValue.value.trim().toLowerCase();if(!t){o.notFound.classList.add("not-found--visible");return}const r=await v(t);if(o.productsList.innerHTML="",r.length===0){o.notFound.classList.add("not-found--visible");return}else o.notFound.classList.remove("not-found--visible"),i(r)}async function A(e){e.preventDefault(),o.searchForm.elements.searchValue.value="",o.notFound.classList.remove("not-found--visible"),i(await p())}function R(e){e.preventDefault();const t=e.target;t.dataset.inCart==="true"?(E(n),c.success({title:"Success",message:"Product removed from cart",position:"topRight"}),t.textContent="Add to cart",t.dataset.inCart="false"):(B(n),c.success({title:"Success",message:"Product added to cart",position:"topRight"}),t.textContent="Remove from cart",t.dataset.inCart="true"),o.dataCartCount.textContent=JSON.parse(localStorage.getItem("cart")).length}T();O();var _;o.dataCartCount.textContent=((_=JSON.parse(localStorage.getItem(d)))==null?void 0:_.length)||0;async function T(){const e=await b();y(e)}async function O(){const e=await p();i(e)}o.categoriesList.addEventListener("click",F);o.searchForm.addEventListener("submit",q);o.searchForm.querySelector(".search-form__btn-clear").addEventListener("click",A);o.productsList.addEventListener("click",I);o.modalCloseBtn.addEventListener("click",w);o.modalProduct.addEventListener("click",k);o.modalProductBtnCart.addEventListener("click",R);
//# sourceMappingURL=index.js.map
